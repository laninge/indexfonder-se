name: Update Fund Data                                                                                                    
                                                                                                                            
  on:                                                                                                                       
    schedule:                                                                                                               
      - cron: '0 6 1 * *'                                                                                                   
    workflow_dispatch:                                                                                                      
                                                                                                                            
  jobs:                                                                                                                     
    update-funds:                                                                                                           
      runs-on: ubuntu-latest                                                                                                
      steps:                                                                                                                
        - uses: actions/checkout@v4                                                                                         
        - uses: actions/setup-python@v5                                                                                     
          with:                                                                                                             
            python-version: '3.11'                                                                                          
        - run: pip install mstarpy requests                                                                                 
        - run: python scripts/update-funds.py                                                                               
        - run: |                                                                                                            
            git diff --exit-code src/data/funds.json || (                                                                   
              git config user.email "github-actions[bot]@users.noreply.github.com"                                          
              git config user.name "github-actions[bot]"                                                                    
              git add src/data/funds.json                                                                                   
              git commit -m "Update fund data"                                                                              
              git push                                                                                                      
            )                                                      
